<HTML
>
<!-- Mirrored from bauhh.dyndns.org:8000/clim-spec/15-4.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 Nov 2021 17:30:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=ISO-8859-1" /><!-- /Added by HTTrack -->
<HEAD
><TITLE
>CLIM 2 Specification &mdash; 15.4 Text Protocol</TITLE
><LINK REL="Stylesheet" TYPE="text/css" HREF="clim.css"
></LINK
><LINK REL="prev" TYPE="text/html" TITLE="15.3 The Text Cursor" HREF="15-3.html"
></LINK
><LINK REL="next" TYPE="text/html" TITLE="15.5 Attracting the User's Attention" HREF="15-5.html"
></LINK
><LINK REL="up" TYPE="text/html" TITLE="15 Extended Stream Output" HREF="15.html"
></LINK
><LINK REL="start" TYPE="text/html" TITLE="Common Lisp Interface Manager   CLIM II Specification" HREF="index-2.html"
></LINK
><LINK REL="glossary" TYPE="text/html" TITLE="Glossary" HREF="A.html"
></LINK
><LINK REL="index" TYPE="text/html" TITLE="Index" HREF="theindex.html"
></LINK
><LINK REL="contents" TYPE="text/html" TITLE="Table of Contents" HREF="contents.html"
></LINK
></HEAD
><BODY
><DIV CLASS="navbar"
><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0" BORDER="0"
><COLGROUP
><COL WIDTH="0*"
></COL
><COL WIDTH="0*"
></COL
><COL WIDTH="1*"
></COL
><COL WIDTH="0*"
></COL
></COLGROUP
><TR
><TD ALIGN="LEFT" VALIGN="BASELINE"
><A HREF="15-3.html"
>Prev</A
><BR
><A HREF="15-5.html"
>Next</A
></TD
><TD
>&nbsp;&nbsp;&nbsp;&nbsp;</TD
><TD ALIGN="LEFT" VALIGN="BASELINE" NOWRAP="NOWRAP"
><SPAN CLASS="upchain"
> &nbsp;<A HREF="index-2.html"
>CLIM&nbsp;2&nbsp;Specification</A
> &rarr;&nbsp;<A HREF="P-V.html"
>Part&nbsp;V:&nbsp;Extended&nbsp;Stream&nbsp;Output&nbsp;Facilities</A
> &rarr;&nbsp;<A HREF="15.html"
>15&nbsp;Extended&nbsp;Stream&nbsp;Output</A
><BR
>&rarr;&nbsp;<A HREF="15-4.html"
><B
>15.4&nbsp;Text&nbsp;Protocol</B
></A
></SPAN
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD
><TD ALIGN="RIGHT" VALIGN="BASELINE"
><DIV CLASS="apropos"
><FORM METHOD="GET" ACTION="http://bauhh.dyndns.org:8000/clim-spec/edit/apropos"
>Apropos <BR
><INPUT SIZE="20" NAME="q"
></INPUT
></FORM
></DIV
></TD
></TR
></TABLE
></DIV
><A NAME="_806"></A><DIV
><H3
>15.4 Text Protocol</H3
><LI CLASS="outline_item"
><A HREF="15-4.html#_814"
>15.4.1 Mixing Text and Graphics</A
></LI
><LI CLASS="outline_item"
><A HREF="15-4.html#_816"
>15.4.2 Wrapping of Text Lines</A
></LI
><P
>The following generic functions comprise the text protocol. Any extended output stream class must implement methods for these generic functions. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=7CBF873656FEBD8BB7BF0F964A5BBBD9%2F15.4#Z" CLASS="annolink"
>[annotate]</A
></P
><DIV CLASS="defun"
><DIV CLASS="defunsignatures"
><A NAME="_807"></A><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"
><COLGROUP SPAN="3"
><COL WIDTH="0*"
></COL
><COL WIDTH="1*"
></COL
><COL WIDTH="0*"
></COL
></COLGROUP
><TR
><TD ALIGN="LEFT" VALIGN="BASELINE" NOWRAP="NOWRAP"
><B CLASS="cl"
>stream-character-width</B
>&nbsp;&nbsp;</TD
><TD ALIGN="LEFT" VALIGN="BASELINE" WIDTH="100%"
><I
>stream character </I
><I
><TT
>&amp;key </TT
></I
><I
>text-style</I
></TD
><TD ALIGN="RIGHT" VALIGN="BASELINE" NOWRAP="NOWRAP"
>&nbsp;[Generic&nbsp;Function]</TD
></TR
></TABLE
></DIV
><DIV CLASS="defunbody"
><TABLE
><TR
><TD
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD
><TD
><P
>Returns a rational number corresponding to the amount of horizontal motion of the cursor position that would occur if the character <I
>character</I
> were output to the <SPAN CLASS="term"
>extended output stream</SPAN
> <I
>stream</I
> in the <A NAME="_3651"></A><A HREF="11.html#_563"
><SPAN CLASS="term"
>text style</SPAN
></A
> <I
>text-style</I
> (which defaults to the current text style for the stream). This ignores the stream's text margin. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=72EEF31CD0C4DC257FF00EC84795613D%2Fstream-character-width%2F15.4#Z" CLASS="annolink"
>[annotate]</A
></P
><P
> <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=A25793F9F29E43CAD95862B7E0527C09%2Fstream-character-width%2F15.4#Z" CLASS="annolink"
>[annotate]</A
></P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV CLASS="defun"
><DIV CLASS="defunsignatures"
><A NAME="_808"></A><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"
><COLGROUP SPAN="3"
><COL WIDTH="0*"
></COL
><COL WIDTH="1*"
></COL
><COL WIDTH="0*"
></COL
></COLGROUP
><TR
><TD ALIGN="LEFT" VALIGN="BASELINE" NOWRAP="NOWRAP"
><B CLASS="cl"
>stream-string-width</B
>&nbsp;&nbsp;</TD
><TD ALIGN="LEFT" VALIGN="BASELINE" WIDTH="100%"
><I
>stream character </I
><I
><TT
>&amp;key </TT
></I
><I
>start end text-style</I
></TD
><TD ALIGN="RIGHT" VALIGN="BASELINE" NOWRAP="NOWRAP"
>&nbsp;[Generic&nbsp;Function]</TD
></TR
></TABLE
></DIV
><DIV CLASS="defunbody"
><TABLE
><TR
><TD
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD
><TD
><P
>Computes how the cursor position would move horizontally if the string <I
>string</I
> were output to the <SPAN CLASS="term"
>extended output stream</SPAN
> <I
>stream</I
> in the <A NAME="_3653"></A><A HREF="11.html#_563"
><SPAN CLASS="term"
>text style</SPAN
></A
> <I
>text-style</I
> (which defaults to the current text style for the stream) starting at the left margin. This ignores the stream's text margin. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=76A4D0A67BD0AC221FDAFF23E6162D2D%2Fstream-string-width%2F15.4#Z" CLASS="annolink"
>[annotate]</A
></P
><P
>The first returned value is the <I
>x</I
> coordinate that the cursor position would move to. The second returned value is the maximum <I
>x</I
> coordinate the cursor would visit during the output. (This is the same as the first value unless the string contains a <CODE
>#\Newline</CODE
> character.) <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=695CDFA7F202668F1B4AB565E78065BF%2Fstream-string-width%2F15.4#Z" CLASS="annolink"
>[annotate]</A
></P
><P
><I
>start</I
> and <I
>end</I
> are integers, and default to 0 and the length of the string, respectively. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=A2560D30D3042723EB6FF1F48C08F1C1%2Fstream-string-width%2F15.4#Z" CLASS="annolink"
>[annotate]</A
></P
><P
> <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=21B45FB5C01197AF5979105D3CA4D934%2Fstream-string-width%2F15.4#Z" CLASS="annolink"
>[annotate]</A
><DIV
><DIV CLASS="annotation"
><I CLASS="annotationheader"
>Note: </I
><A NAME="Z114"
></A
>Arguments probably should be "stream string &amp;key start end text-style" -- tztztz, this copy and paste bookwriting style <A CLASS="annolink" HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=21B45FB5C01197AF5979105D3CA4D934%2Fstream-string-width%2F15.4&amp;editp=t&amp;id=Z114#Z114"
>[edit]</A
><I CLASS="annotationsignature"
>-- Deliana Foutekova 2005-11-21 19:09Z</I
><DIV
>&nbsp;</DIV
></DIV
></DIV
></P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV CLASS="defun"
><DIV CLASS="defunsignatures"
><A NAME="_809"></A><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"
><COLGROUP SPAN="3"
><COL WIDTH="0*"
></COL
><COL WIDTH="1*"
></COL
><COL WIDTH="0*"
></COL
></COLGROUP
><TR
><TD ALIGN="LEFT" VALIGN="BASELINE" NOWRAP="NOWRAP"
><B CLASS="cl"
>stream-text-margin</B
>&nbsp;&nbsp;</TD
><TD ALIGN="LEFT" VALIGN="BASELINE" WIDTH="100%"
><I
>stream</I
></TD
><TD ALIGN="RIGHT" VALIGN="BASELINE" NOWRAP="NOWRAP"
>&nbsp;[Generic&nbsp;Function]</TD
></TR
></TABLE
><A NAME="_810"></A><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"
><COLGROUP SPAN="3"
><COL WIDTH="0*"
></COL
><COL WIDTH="1*"
></COL
><COL WIDTH="0*"
></COL
></COLGROUP
><TR
><TD ALIGN="LEFT" VALIGN="BASELINE" NOWRAP="NOWRAP"
><B CLASS="cl"
>(setf stream-text-margin)</B
>&nbsp;&nbsp;</TD
><TD ALIGN="LEFT" VALIGN="BASELINE" WIDTH="100%"
><I
>margin stream</I
></TD
><TD ALIGN="RIGHT" VALIGN="BASELINE" NOWRAP="NOWRAP"
>&nbsp;[Generic&nbsp;Function]</TD
></TR
></TABLE
></DIV
><DIV CLASS="defunbody"
><TABLE
><TR
><TD
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD
><TD
><P
>The <I
>x</I
> coordinate at which text wraps around on the <SPAN CLASS="term"
>extended output stream</SPAN
> <I
>stream</I
> (see <A NAME="_3655"></A><A HREF="15-4.html#_817"
><B CLASS="cl"
>stream-end-of-line-action</B
></A
>). The default setting is the width of the viewport, which is the right-hand edge of the viewport when it is horizontally scrolled to the "initial position". <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=054581135E5BD63744685FDB92810CB2%2Fstream-text-margin%2F15.4#Z" CLASS="annolink"
>[annotate]</A
></P
><P
>You can use <B CLASS="cl"
>setf</B
> with <B CLASS="cl"
>stream-text-margin</B
> to establish a new text margin. If <I
>margin</I
> is <A NAME="_3658"></A><A HREF="23-8.html#_1254"
><B CLASS="cl"
>nil</B
></A
>, then the width of the viewport will be used. If the width of the viewport is later changed, the text margin will change, too. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=3C8755F5F04A97FAD0BD31126D99E36F%2Fstream-text-margin%2F15.4#Z" CLASS="annolink"
>[annotate]</A
></P
><P
> <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=041FE3744226A5A523CA71A9A9CC8569%2Fstream-text-margin%2F15.4#Z" CLASS="annolink"
>[annotate]</A
><DIV
><DIV CLASS="annotation"
><I CLASS="annotationheader"
>Note: </I
><A NAME="Z350"
></A
>For output backends (like postscript) stream may have no viewport and stream's region may be +everywhere+ &#150; that means in particular, that width is infinite and there is no margin. <A CLASS="annolink" HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=041FE3744226A5A523CA71A9A9CC8569%2Fstream-text-margin%2F15.4&amp;editp=t&amp;id=Z350#Z350"
>[edit]</A
><I CLASS="annotationsignature"
>-- Daniel Kochmanski 2018-10-31 07:29Z</I
><DIV
>&nbsp;</DIV
></DIV
></DIV
></P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV CLASS="defun"
><DIV CLASS="defunsignatures"
><A NAME="_811"></A><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"
><COLGROUP SPAN="3"
><COL WIDTH="0*"
></COL
><COL WIDTH="1*"
></COL
><COL WIDTH="0*"
></COL
></COLGROUP
><TR
><TD ALIGN="LEFT" VALIGN="BASELINE" NOWRAP="NOWRAP"
><B CLASS="cl"
>stream-line-height</B
>&nbsp;&nbsp;</TD
><TD ALIGN="LEFT" VALIGN="BASELINE" WIDTH="100%"
><I
>stream </I
><I
><TT
>&amp;key </TT
></I
><I
>text-style</I
></TD
><TD ALIGN="RIGHT" VALIGN="BASELINE" NOWRAP="NOWRAP"
>&nbsp;[Generic&nbsp;Function]</TD
></TR
></TABLE
></DIV
><DIV CLASS="defunbody"
><TABLE
><TR
><TD
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD
><TD
><P
>Returns what the line height of a line on the <SPAN CLASS="term"
>extended output stream</SPAN
> <I
>stream</I
> containing text in the <A NAME="_3660"></A><A HREF="11.html#_563"
><SPAN CLASS="term"
>text style</SPAN
></A
> <I
>text-style</I
> would be, as a rational number. The height of the line is measured from the baseline of the text style to its ascent. <I
>text-style</I
> defaults to the current text style for the stream. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=BDD2C908ACE3A5B00D41E1CF97E8BD73%2Fstream-line-height%2F15.4#Z" CLASS="annolink"
>[annotate]</A
></P
><P
> <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=215C24AF1245CFC635C38EA8DEF4E100%2Fstream-line-height%2F15.4#Z" CLASS="annolink"
>[annotate]</A
></P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV CLASS="defun"
><DIV CLASS="defunsignatures"
><A NAME="_812"></A><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"
><COLGROUP SPAN="3"
><COL WIDTH="0*"
></COL
><COL WIDTH="1*"
></COL
><COL WIDTH="0*"
></COL
></COLGROUP
><TR
><TD ALIGN="LEFT" VALIGN="BASELINE" NOWRAP="NOWRAP"
><B CLASS="cl"
>stream-vertical-spacing</B
>&nbsp;&nbsp;</TD
><TD ALIGN="LEFT" VALIGN="BASELINE" WIDTH="100%"
><I
>stream</I
></TD
><TD ALIGN="RIGHT" VALIGN="BASELINE" NOWRAP="NOWRAP"
>&nbsp;[Generic&nbsp;Function]</TD
></TR
></TABLE
></DIV
><DIV CLASS="defunbody"
><TABLE
><TR
><TD
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD
><TD
><P
>Returns the current inter-line spacing (as a rational number) for the <SPAN CLASS="term"
>extended output stream</SPAN
> <I
>stream</I
>. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=AFF5FFA7C7D1D0E1AD4163BA80642D01%2Fstream-vertical-spacing%2F15.4#Z" CLASS="annolink"
>[annotate]</A
></P
><P
> <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=7B3856972706A0EA737FB170B2131A62%2Fstream-vertical-spacing%2F15.4#Z" CLASS="annolink"
>[annotate]</A
></P
><DIV CLASS="reverselinks"
><A HREF="F.html#_7346"
><SPAN CLASS="reverselink"
>[&larr; F Changes from CLIM 1.0]</SPAN
></A
><BR
></DIV
></TD
></TR
></TABLE
></DIV
></DIV
><DIV CLASS="defun"
><DIV CLASS="defunsignatures"
><A NAME="_813"></A><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"
><COLGROUP SPAN="3"
><COL WIDTH="0*"
></COL
><COL WIDTH="1*"
></COL
><COL WIDTH="0*"
></COL
></COLGROUP
><TR
><TD ALIGN="LEFT" VALIGN="BASELINE" NOWRAP="NOWRAP"
><B CLASS="cl"
>stream-baseline</B
>&nbsp;&nbsp;</TD
><TD ALIGN="LEFT" VALIGN="BASELINE" WIDTH="100%"
><I
>stream</I
></TD
><TD ALIGN="RIGHT" VALIGN="BASELINE" NOWRAP="NOWRAP"
>&nbsp;[Generic&nbsp;Function]</TD
></TR
></TABLE
></DIV
><DIV CLASS="defunbody"
><TABLE
><TR
><TD
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD
><TD
><P
>Returns the current text baseline (as a rational number) for the <SPAN CLASS="term"
>extended output stream</SPAN
> <I
>stream</I
>. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=85A0B7B66560427DBC0832A51CDCC5C7%2Fstream-baseline%2F15.4#Z" CLASS="annolink"
>[annotate]</A
></P
><P
> <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=1E904F0F036B84CB0DC28F48902E288B%2Fstream-baseline%2F15.4#Z" CLASS="annolink"
>[annotate]</A
></P
></TD
></TR
></TABLE
></DIV
></DIV
><A NAME="_814"></A><DIV
><H4
>15.4.1 Mixing Text and Graphics</H4
><P
>The following macro provides a convenient way to mix text and graphics on the same output stream. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=91432E571C1E9761B0D50EF06A88957A%2F15.4.1#Z" CLASS="annolink"
>[annotate]</A
></P
><DIV CLASS="defun"
><DIV CLASS="defunsignatures"
><A NAME="_815"></A><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"
><COLGROUP SPAN="3"
><COL WIDTH="0*"
></COL
><COL WIDTH="1*"
></COL
><COL WIDTH="0*"
></COL
></COLGROUP
><TR
><TD ALIGN="LEFT" VALIGN="BASELINE" NOWRAP="NOWRAP"
><B CLASS="cl"
>with-room-for-graphics</B
>&nbsp;&nbsp;</TD
><TD ALIGN="LEFT" VALIGN="BASELINE" WIDTH="100%"
><I
>(</I
><I
><TT
>&amp;optional </TT
></I
><I
>stream  </I
><I
><TT
>&amp;key </TT
></I
><I
>(first-quadrant </I
><I
><B CLASS="cl"
>t</B
></I
><I
>) height (move-cursor </I
><I
><B CLASS="cl"
>t</B
></I
><I
>)  record-type)  </I
><I
><TT
>&amp;body </TT
></I
><I
>body</I
></TD
><TD ALIGN="RIGHT" VALIGN="BASELINE" NOWRAP="NOWRAP"
>&nbsp;[Macro]</TD
></TR
></TABLE
></DIV
><DIV CLASS="defunbody"
><TABLE
><TR
><TD
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD
><TD
><P
>Binds the dynamic environment to establish a local coordinate system for doing graphics output onto the <SPAN CLASS="term"
>extended output stream</SPAN
> designated by <I
>stream</I
>. If <I
>first-quadrant</I
> is <SPAN CLASS="term"
>true</SPAN
> (the default), a local Cartesian coordinate system is established with the origin <I
>(<SPAN
>0</SPAN
>,<SPAN
>0</SPAN
>)</I
> of the local coordinate system placed at the current cursor position; <I
>(<SPAN
>0</SPAN
>,<SPAN
>0</SPAN
>)</I
> is in the lower left corner of the area created. If the boolean <I
>move-cursor</I
> is <SPAN CLASS="term"
>true</SPAN
> (the default), then after the graphic output is completed, the cursor is positioned past (immediately below) this origin. The bottom of the vertical block allocated is at this location (that is, just below point <I
>(<SPAN
>0</SPAN
>,<SPAN
>0</SPAN
>)</I
>, not necessarily at the bottom of the output done). <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=2A9121908F01CE035A56C7C813988192%2Fwith-room-for-graphics%2F15.4.1#Z" CLASS="annolink"
>[annotate]</A
></P
><P
>The <I
>stream</I
> argument is not evaluated, and must be a symbol that is bound to a stream. If <I
>stream</I
> is <A NAME="_3666"></A><A HREF="23-8.html#_1253"
><B CLASS="cl"
>t</B
></A
> (the default), <B CLASS="cl"
>*standard-output*</B
> is used. <I
>body</I
> may have zero or more declarations as its first forms. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=727083C84BED62929F6BD09597837E78%2Fwith-room-for-graphics%2F15.4.1#Z" CLASS="annolink"
>[annotate]</A
></P
><P
>If <I
>height</I
> is supplied, it must be a rational number that specifies the amount of vertical space to allocate for the output, in device units. If it is not supplied, the height is computed from the output. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=695AFA3A60D018E8D5DC64B2E907C243%2Fwith-room-for-graphics%2F15.4.1#Z" CLASS="annolink"
>[annotate]</A
></P
><P
><I
>record-type</I
> specifies the class of output record to create to hold the graphical output. The default is <A NAME="_3668"></A><A HREF="16-3.html#_872"
><B CLASS="cl"
>standard-sequence-output-record</B
></A
>. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=977A5074DF2D0B8014EF39CA78BBE325%2Fwith-room-for-graphics%2F15.4.1#Z" CLASS="annolink"
>[annotate]</A
></P
><P
> <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=3819CFE7604A15C5B9B14BBB6669E7C6%2Fwith-room-for-graphics%2F15.4.1#Z" CLASS="annolink"
>[annotate]</A
></P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><A NAME="_816"></A><DIV
><H4
>15.4.2 Wrapping of Text Lines</H4
><DIV CLASS="defun"
><DIV CLASS="defunsignatures"
><A NAME="_817"></A><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"
><COLGROUP SPAN="3"
><COL WIDTH="0*"
></COL
><COL WIDTH="1*"
></COL
><COL WIDTH="0*"
></COL
></COLGROUP
><TR
><TD ALIGN="LEFT" VALIGN="BASELINE" NOWRAP="NOWRAP"
><B CLASS="cl"
>stream-end-of-line-action</B
>&nbsp;&nbsp;</TD
><TD ALIGN="LEFT" VALIGN="BASELINE" WIDTH="100%"
><I
>stream</I
></TD
><TD ALIGN="RIGHT" VALIGN="BASELINE" NOWRAP="NOWRAP"
>&nbsp;[Generic&nbsp;Function]</TD
></TR
></TABLE
><A NAME="_818"></A><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"
><COLGROUP SPAN="3"
><COL WIDTH="0*"
></COL
><COL WIDTH="1*"
></COL
><COL WIDTH="0*"
></COL
></COLGROUP
><TR
><TD ALIGN="LEFT" VALIGN="BASELINE" NOWRAP="NOWRAP"
><B CLASS="cl"
>(setf stream-end-of-line-action)</B
>&nbsp;&nbsp;</TD
><TD ALIGN="LEFT" VALIGN="BASELINE" WIDTH="100%"
><I
>action stream</I
></TD
><TD ALIGN="RIGHT" VALIGN="BASELINE" NOWRAP="NOWRAP"
>&nbsp;[Generic&nbsp;Function]</TD
></TR
></TABLE
></DIV
><DIV CLASS="defunbody"
><TABLE
><TR
><TD
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD
><TD
><P
>The end-of-line action controls what happens if the text cursor position moves horizontally out of the viewport, or if text output reaches the text margin. (By default the text margin is the width of the viewport, so these are usually the same thing.) <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=51526D717C55A1D416B55AD8B3FFFCD2%2Fstream-end-of-line-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></P
><P
><B CLASS="cl"
>stream-end-of-line-action</B
> returns the end-of-line action for the <SPAN CLASS="term"
>extended output stream</SPAN
> <I
>stream</I
>. It can be changed by using <B CLASS="cl"
>setf</B
> on <B CLASS="cl"
>stream-end-of-line-action</B
>. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=5B67A3257D1E53BB2044B510FB1BE570%2Fstream-end-of-line-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></P
><P
>The end-of-line action is one of: <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=55F48C092851373C8A638DDF0A1AA2CD%2Fstream-end-of-line-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></P
><UL
><LI
><B CLASS="cl"
>:wrap</B
>---when doing text output, wrap the text around (that is, break the text line and start another line). When setting the cursor position, scroll the window horizontally to keep the cursor position inside the viewport. This is the default. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=648C6CDC4CCE367A60A209B0E942F93F%2Fstream-end-of-line-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></LI
><LI
><B CLASS="cl"
>:scroll</B
>---scroll the window horizontally to keep the cursor position inside the viewport, then keep doing the output. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=CC22681951198D1DF72ECA64AE44DC52%2Fstream-end-of-line-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></LI
><LI
><B CLASS="cl"
>:allow</B
>---ignore the text margin and do the output on the drawing plane beyond the visible part of the viewport.  <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=A498AC188D8076239FC030152B60AB89%2Fstream-end-of-line-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></LI
></UL
><P
> <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=F63D8DA3A8454AA6328FBDC807048F54%2Fstream-end-of-line-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></P
><DIV CLASS="reverselinks"
><A HREF="15-4.html#_3676"
><SPAN CLASS="reverselink"
>[&larr; 15.4.2 Wrapping of Text Lines, <B CLASS="cl"
><B CLASS="cl"
>with-end-of-line-action</B
></B
>]</SPAN
></A
><BR
><A HREF="15-4.html#_3655"
><SPAN CLASS="reverselink"
>[&larr; 15.4 Text Protocol, <B CLASS="cl"
><B CLASS="cl"
>stream-text-margin</B
></B
>]</SPAN
></A
><BR
></DIV
></TD
></TR
></TABLE
></DIV
></DIV
><DIV CLASS="defun"
><DIV CLASS="defunsignatures"
><A NAME="_819"></A><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"
><COLGROUP SPAN="3"
><COL WIDTH="0*"
></COL
><COL WIDTH="1*"
></COL
><COL WIDTH="0*"
></COL
></COLGROUP
><TR
><TD ALIGN="LEFT" VALIGN="BASELINE" NOWRAP="NOWRAP"
><B CLASS="cl"
>with-end-of-line-action</B
>&nbsp;&nbsp;</TD
><TD ALIGN="LEFT" VALIGN="BASELINE" WIDTH="100%"
><I
>(stream action) </I
><I
><TT
>&amp;body </TT
></I
><I
>body</I
></TD
><TD ALIGN="RIGHT" VALIGN="BASELINE" NOWRAP="NOWRAP"
>&nbsp;[Macro]</TD
></TR
></TABLE
></DIV
><DIV CLASS="defunbody"
><TABLE
><TR
><TD
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD
><TD
><P
>Temporarily changes <I
>stream</I
>'s end-of-line action for the duration of execution of body. <I
>action</I
> must be one of the actions described in <A NAME="_3676"></A><A HREF="15-4.html#_817"
><B CLASS="cl"
>stream-end-of-line-action</B
></A
>. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=9C2E7B5BFE15F3777DED6AFB88C0B50D%2Fwith-end-of-line-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></P
><P
>The <I
>stream</I
> argument is not evaluated, and must be a symbol that is bound to a stream. If <I
>stream</I
> is <A NAME="_3677"></A><A HREF="23-8.html#_1253"
><B CLASS="cl"
>t</B
></A
>, <B CLASS="cl"
>*standard-output*</B
> is used. <I
>body</I
> may have zero or more declarations as its first forms. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=7531285DC8FB9E16B8759C5791A65743%2Fwith-end-of-line-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></P
><P
> <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=6FCDE8E8D701440325D047AB13610744%2Fwith-end-of-line-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></P
><DIV CLASS="reverselinks"
><A HREF="F.html#_7347"
><SPAN CLASS="reverselink"
>[&larr; F Changes from CLIM 1.0]</SPAN
></A
><BR
></DIV
></TD
></TR
></TABLE
></DIV
></DIV
><DIV CLASS="defun"
><DIV CLASS="defunsignatures"
><A NAME="_820"></A><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"
><COLGROUP SPAN="3"
><COL WIDTH="0*"
></COL
><COL WIDTH="1*"
></COL
><COL WIDTH="0*"
></COL
></COLGROUP
><TR
><TD ALIGN="LEFT" VALIGN="BASELINE" NOWRAP="NOWRAP"
><B CLASS="cl"
>stream-end-of-page-action</B
>&nbsp;&nbsp;</TD
><TD ALIGN="LEFT" VALIGN="BASELINE" WIDTH="100%"
><I
>stream</I
></TD
><TD ALIGN="RIGHT" VALIGN="BASELINE" NOWRAP="NOWRAP"
>&nbsp;[Generic&nbsp;Function]</TD
></TR
></TABLE
><A NAME="_821"></A><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"
><COLGROUP SPAN="3"
><COL WIDTH="0*"
></COL
><COL WIDTH="1*"
></COL
><COL WIDTH="0*"
></COL
></COLGROUP
><TR
><TD ALIGN="LEFT" VALIGN="BASELINE" NOWRAP="NOWRAP"
><B CLASS="cl"
>(setf stream-end-of-page-action)</B
>&nbsp;&nbsp;</TD
><TD ALIGN="LEFT" VALIGN="BASELINE" WIDTH="100%"
><I
>action stream</I
></TD
><TD ALIGN="RIGHT" VALIGN="BASELINE" NOWRAP="NOWRAP"
>&nbsp;[Generic&nbsp;Function]</TD
></TR
></TABLE
></DIV
><DIV CLASS="defunbody"
><TABLE
><TR
><TD
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD
><TD
><P
>The end-of-page action controls what happens if the text cursor position moves vertically out of the viewport. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=99BDA66E551FACC6E4503AB46AC20D55%2Fstream-end-of-page-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></P
><P
><B CLASS="cl"
>stream-end-of-page-action</B
> returns the end-of-page action for the <SPAN CLASS="term"
>extended output stream</SPAN
> <I
>stream</I
>. It can be changed by using <B CLASS="cl"
>setf</B
> on <B CLASS="cl"
>stream-end-of-page-action</B
>. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=27FAC1C726A333CF2B608595F0D80581%2Fstream-end-of-page-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></P
><P
>The end-of-page action is one of: <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=A917A2B30E24CE48998B435ACC0CE706%2Fstream-end-of-page-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></P
><UL
><LI
><B CLASS="cl"
>:scroll</B
>---scroll the window vertically to keep the cursor position inside the viewport, then keep doing output. This is the default. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=E1AEE2F938EEAC1469F245BE43141D00%2Fstream-end-of-page-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></LI
><LI
><B CLASS="cl"
>:allow</B
>---ignore the viewport and do the output on the drawing plane beyond the visible part of the viewport. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=49EC7B25E9AA5098455879B3B6B1F29A%2Fstream-end-of-page-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></LI
><LI
><B CLASS="cl"
>:wrap</B
>---when doing text output, wrap the text around (that is, go back to the top of the viewport).  <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=A113AAFDDED40115549F261EEF4EE425%2Fstream-end-of-page-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></LI
></UL
><P
> <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=8BE4081777A2863E65FF87708045B574%2Fstream-end-of-page-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
><DIV
><DIV CLASS="annotation"
><I CLASS="annotationheader"
>Note: </I
><A NAME="Z355"
></A
><P
>Wow, :WRAP end-of-page-action seems useless. I can't think of a single practical purpose of it. </P
><P
>Maybe it should clean the viewport? Then it would be a "modulo" output sort of thing. In that case it could pause waiting for user key press like on ITS (according to Elias).</P
><P
>Or maybe it is specified with vertical text in mind?</P
><P
>Also, there should be note-stream-end-of-page (in that case programmer could implement desired behavior themselves).</P
> <A CLASS="annolink" HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=8BE4081777A2863E65FF87708045B574%2Fstream-end-of-page-action%2F15.4.2&amp;editp=t&amp;id=Z355#Z355"
>[edit]</A
><I CLASS="annotationsignature"
>-- Daniel Kochmanski 2019-01-08 11:04Z</I
><DIV
>&nbsp;</DIV
></DIV
></DIV
></P
><DIV CLASS="reverselinks"
><A HREF="15-4.html#_3686"
><SPAN CLASS="reverselink"
>[&larr; 15.4.2 Wrapping of Text Lines, <B CLASS="cl"
><B CLASS="cl"
>with-end-of-page-action</B
></B
>]</SPAN
></A
><BR
></DIV
></TD
></TR
></TABLE
></DIV
></DIV
><DIV CLASS="defun"
><DIV CLASS="defunsignatures"
><A NAME="_822"></A><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"
><COLGROUP SPAN="3"
><COL WIDTH="0*"
></COL
><COL WIDTH="1*"
></COL
><COL WIDTH="0*"
></COL
></COLGROUP
><TR
><TD ALIGN="LEFT" VALIGN="BASELINE" NOWRAP="NOWRAP"
><B CLASS="cl"
>with-end-of-page-action</B
>&nbsp;&nbsp;</TD
><TD ALIGN="LEFT" VALIGN="BASELINE" WIDTH="100%"
><I
>(stream action) </I
><I
><TT
>&amp;body </TT
></I
><I
>body</I
></TD
><TD ALIGN="RIGHT" VALIGN="BASELINE" NOWRAP="NOWRAP"
>&nbsp;[Macro]</TD
></TR
></TABLE
></DIV
><DIV CLASS="defunbody"
><TABLE
><TR
><TD
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD
><TD
><P
>Temporarily changes <I
>stream</I
>'s end-of-page action for the duration of execution of body. <I
>action</I
> must be one of the actions described in <A NAME="_3686"></A><A HREF="15-4.html#_820"
><B CLASS="cl"
>stream-end-of-page-action</B
></A
>. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=6C6FEA14B75486A1BD1FA2339E5E9E14%2Fwith-end-of-page-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></P
><P
>The <I
>stream</I
> argument is not evaluated, and must be a symbol that is bound to a stream. If <I
>stream</I
> is <A NAME="_3687"></A><A HREF="23-8.html#_1253"
><B CLASS="cl"
>t</B
></A
>, <B CLASS="cl"
>*standard-output*</B
> is used. <I
>body</I
> may have zero or more declarations as its first forms. <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=7531285DC8FB9E16B8759C5791A65743%2Fwith-end-of-page-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></P
><P
> <A HREF="http://bauhh.dyndns.org:8000/clim-spec/edit/anno?aid=0F8F4872A9A383A2927BE7E499998875%2Fwith-end-of-page-action%2F15.4.2#Z" CLASS="annolink"
>[annotate]</A
></P
><DIV CLASS="reverselinks"
><A HREF="F.html#_7348"
><SPAN CLASS="reverselink"
>[&larr; F Changes from CLIM 1.0]</SPAN
></A
><BR
></DIV
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
></DIV
><DIV CLASS="footer"
><P
>Conversion to HTML and annotation support by Gilbert Baumann <TT
>&lt;gi<SPAN CLASS="blah"
>nothing to see here</SPAN
>lbert@bau<SPAN CLASS="blah"
>neither is here</SPAN
>hh.de&gt;</TT
> </P
></DIV
></BODY
>
<!-- Mirrored from bauhh.dyndns.org:8000/clim-spec/15-4.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 Nov 2021 17:30:53 GMT -->
</HTML
>